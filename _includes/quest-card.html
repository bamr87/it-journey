{% comment %}
  Quest Card Include
  
  Displays an individual quest as a card with:
  - Title with link
  - Difficulty badge with emoji
  - Estimated time
  - Quest type badge
  - Level indicator
  - Description preview
  
  Usage: {% include quest-card.html quest=quest %}
  
  Required frontmatter in quest pages:
  - title: Quest title
  - difficulty: "ğŸŸ¢ Easy" | "ğŸŸ¡ Medium" | "ğŸ”´ Hard" | "âš”ï¸ Epic"
  - estimated_time: e.g., "2-4 hours"
  - quest_type: "main_quest" | "side_quest" | "bonus_quest" | "epic_quest"
  - level: Binary level (e.g., "0001", "1010")
  - description: Brief quest description
{% endcomment %}

{% assign quest = include.quest %}

<article class="quest-card" 
         data-difficulty="{{ quest.difficulty | default: 'Unknown' }}"
         data-quest-type="{{ quest.quest_type | default: 'main_quest' }}"
         data-level="{{ quest.level | default: '0000' }}"
         data-technology="{{ quest.primary_technology | default: '' }}"
         data-skill-focus="{{ quest.skill_focus | default: '' }}"
         data-title="{{ quest.title | escape }}"
         data-description="{{ quest.description | default: '' | strip_html | escape }}">
  
  <div class="quest-card-header">
    {% if quest.difficulty %}
      {% assign diff = quest.difficulty | split: ' ' | first %}
      <span class="quest-difficulty" title="{{ quest.difficulty }}">{{ diff }}</span>
    {% endif %}
    
    {% if quest.quest_type %}
      {% case quest.quest_type %}
        {% when 'main_quest' %}
          <span class="quest-type quest-type-main" title="Main Quest">ğŸ°</span>
        {% when 'side_quest' %}
          <span class="quest-type quest-type-side" title="Side Quest">âš”ï¸</span>
        {% when 'bonus_quest' %}
          <span class="quest-type quest-type-bonus" title="Bonus Quest">ğŸ</span>
        {% when 'epic_quest' %}
          <span class="quest-type quest-type-epic" title="Epic Quest">ğŸ‘‘</span>
        {% else %}
          <span class="quest-type" title="{{ quest.quest_type }}">ğŸ“œ</span>
      {% endcase %}
    {% endif %}
  </div>
  
  <h3 class="quest-card-title">
    <a href="{{ quest.url | relative_url }}">{{ quest.title | default: 'Untitled Quest' }}</a>
  </h3>
  
  {% if quest.description %}
    <p class="quest-card-description">{{ quest.description | truncate: 120 }}</p>
  {% endif %}
  
  <div class="quest-card-meta">
    {% if quest.estimated_time %}
      <span class="quest-time" title="Estimated Time">
        ğŸ• {{ quest.estimated_time }}
      </span>
    {% endif %}
    
    {% if quest.level %}
      <span class="quest-level" title="Level {{ quest.level }}">
        ğŸ“Š Lvl {{ quest.level }}
      </span>
    {% endif %}
    
    {% if quest.primary_technology %}
      <span class="quest-tech" title="Primary Technology">
        ğŸ› ï¸ {{ quest.primary_technology }}
      </span>
    {% endif %}
  </div>
  
  {% if quest.rewards.badges %}
    <div class="quest-card-rewards">
      {% for badge in quest.rewards.badges limit:2 %}
        <span class="quest-badge-preview">{{ badge | truncate: 20 }}</span>
      {% endfor %}
    </div>
  {% endif %}
  
  <a href="{{ quest.url | relative_url }}" class="quest-card-link">
    Begin Quest â†’
  </a>
</article>

<style>
.quest-card {
  background: var(--card-bg, #ffffff);
  border: 1px solid var(--border-color, #e1e4e8);
  border-radius: 8px;
  padding: 1.25rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  height: 100%;
}

.quest-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.quest-card-header {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

.quest-difficulty {
  font-size: 1.25rem;
}

.quest-type {
  font-size: 1rem;
  padding: 0.125rem 0.375rem;
  border-radius: 4px;
  background: var(--type-bg, #f1f3f5);
}

.quest-type-main { background: #e3f2fd; }
.quest-type-side { background: #fff3e0; }
.quest-type-bonus { background: #f3e5f5; }
.quest-type-epic { background: #fff8e1; }

.quest-card-title {
  font-size: 1.1rem;
  margin: 0;
  line-height: 1.3;
}

.quest-card-title a {
  color: var(--heading-color, #24292e);
  text-decoration: none;
}

.quest-card-title a:hover {
  color: var(--link-color, #0366d6);
  text-decoration: underline;
}

.quest-card-description {
  font-size: 0.9rem;
  color: var(--text-muted, #586069);
  margin: 0;
  line-height: 1.5;
  flex-grow: 1;
}

.quest-card-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  font-size: 0.8rem;
  color: var(--text-muted, #586069);
}

.quest-card-meta span {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.quest-card-rewards {
  display: flex;
  flex-wrap: wrap;
  gap: 0.375rem;
}

.quest-badge-preview {
  font-size: 0.75rem;
  padding: 0.125rem 0.5rem;
  background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
  border-radius: 12px;
  color: #5a4a00;
}

.quest-card-link {
  display: inline-block;
  padding: 0.5rem 1rem;
  background: var(--btn-bg, #0366d6);
  color: white !important;
  text-decoration: none;
  border-radius: 6px;
  font-size: 0.9rem;
  text-align: center;
  transition: background 0.2s ease;
  margin-top: auto;
}

.quest-card-link:hover {
  background: var(--btn-hover-bg, #0256b9);
  text-decoration: none;
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .quest-card {
    --card-bg: #21262d;
    --border-color: #30363d;
    --heading-color: #c9d1d9;
    --text-muted: #8b949e;
    --type-bg: #30363d;
  }
  
  .quest-type-main { background: #1f3a5f; }
  .quest-type-side { background: #3d2f1f; }
  .quest-type-bonus { background: #3d1f4a; }
  .quest-type-epic { background: #3d3a1f; }
}
</style>
