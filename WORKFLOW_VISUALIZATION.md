# Workflow Change Visualization

## Before: Direct Push Workflow

```mermaid
graph LR
    A[Schedule/Manual Trigger] --> B[Run organize-posts.sh]
    B --> C[Check for Changes]
    C -->|Changes Found| D[git add & commit]
    D --> E[git push origin main]
    E --> F[Changes on Main Branch]
    C -->|No Changes| G[End]
```

**Issues:**
- No review process
- Changes applied immediately to main
- No opportunity to reject unwanted changes

## After: Pull Request Workflow

```mermaid
graph LR
    A[Schedule/Manual Trigger] --> B[Run organize-posts.sh]
    B --> C[Check for Changes]
    C -->|Changes Found| D[Create PR]
    D --> E[Branch: automated/organize-posts-ID]
    E --> F[PR with Summary]
    F --> G[Review Required]
    G -->|Approved| H[Merge to Main]
    G -->|Rejected| I[Close PR]
    H --> J[Auto-delete Branch]
    C -->|No Changes| K[End]
```

**Benefits:**
- âœ… Review process
- âœ… Traceability
- âœ… Safety
- âœ… Transparency
- âœ… Easy rollback

## Workflow Steps Comparison

### Old Workflow (Lines 201-221)
```yaml
- name: 'Commit and Push Changes'
  run: |
    git add pages/_posts/
    git commit -m "$commit_msg"
    git push origin main  # âŒ Direct push
```

### New Workflow (Lines 201-240)
```yaml
- name: 'Create Pull Request with Organized Posts'
  uses: peter-evans/create-pull-request@v7  # âœ… PR-based
  id: create_pr
  with:
    token: ${{ secrets.GITHUB_TOKEN }}
    branch: automated/organize-posts-${{ github.run_id }}
    delete-branch: true
    title: 'ðŸ¤– Weekly Post Organization - ${{ github.run_id }}'
    body: |
      ## ðŸ“‹ Automated Post Organization
      [Summary and details...]
    labels: |
      automated
      content-organization
      posts
    assignees: bamr87
```

## Key Improvements

| Aspect | Before | After |
|--------|--------|-------|
| **Deployment Method** | Direct push to main | Pull request |
| **Review Process** | None | Required |
| **Traceability** | Git log only | PR + Workflow link |
| **Rollback** | Git revert needed | Close PR |
| **Transparency** | Minimal | Full summary in PR |
| **Branch Management** | N/A | Auto-created and deleted |
| **Labels** | N/A | Auto-labeled |
| **Assignment** | N/A | Auto-assigned to bamr87 |

## Example PR Output

When the workflow runs and finds changes, it will create a PR like this:

```markdown
Title: ðŸ¤– Weekly Post Organization - 12345678

## ðŸ“‹ Automated Post Organization

This PR was automatically generated by the Weekly Post Organization workflow.

### ðŸ“Š Summary
- **Workflow Run**: [12345678](https://github.com/bamr87/it-journey/actions/runs/12345678)
- **Triggered**: Scheduled (Weekly)
- **Archive Threshold**: 3 months

### ðŸ“ Changes Made
- Organized X posts into subdirectories
- Archived Y posts (>3 months old)

### âœ… Next Steps
1. Review the organized file structure
2. Verify posts are in correct subdirectories
3. Merge this PR to apply changes

---
*Generated by: Weekly Post Organization and Archiving workflow*
```

**Labels:** `automated`, `content-organization`, `posts`
**Assignee:** `bamr87`
**Branch:** `automated/organize-posts-12345678` (auto-deleted after merge)
